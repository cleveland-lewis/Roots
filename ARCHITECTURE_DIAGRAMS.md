# Roots Multi-Target Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Roots.xcodeproj                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
                  â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      RootsApp Target        â”‚   â”‚     RootsMac Target         â”‚
â”‚       (iOS/iPadOS)          â”‚   â”‚        (macOS)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                               â”‚   â”‚                               â”‚
â”‚  â”œâ”€ RootsApp.swift           â”‚   â”‚  â”œâ”€ RootsMacApp.swift        â”‚
â”‚  â”œâ”€ Info.plist               â”‚   â”‚  â”œâ”€ Info.plist               â”‚
â”‚  â”œâ”€ Roots.entitlements       â”‚   â”‚  â”œâ”€ RootsMac.entitlements    â”‚
â”‚  â”‚                            â”‚   â”‚  â”‚                            â”‚
â”‚  â”œâ”€ Views/                   â”‚   â”‚  â”œâ”€ Views/                   â”‚
â”‚  â”‚   â”œâ”€ IOSRootView.swift    â”‚   â”‚  â”‚   â”œâ”€ MacRootView.swift    â”‚
â”‚  â”‚   â”œâ”€ IOSTabBar.swift      â”‚   â”‚  â”‚   â”œâ”€ MacSidebar.swift     â”‚
â”‚  â”‚   â”œâ”€ Dashboard/           â”‚   â”‚  â”‚   â”œâ”€ Dashboard/           â”‚
â”‚  â”‚   â”œâ”€ Calendar/            â”‚   â”‚  â”‚   â”œâ”€ Calendar/            â”‚
â”‚  â”‚   â”œâ”€ Planner/             â”‚   â”‚  â”‚   â”œâ”€ Planner/             â”‚
â”‚  â”‚   â””â”€ ...                  â”‚   â”‚  â”‚   â””â”€ ...                  â”‚
â”‚  â”‚                            â”‚   â”‚  â”‚                            â”‚
â”‚  â”œâ”€ PlatformExtensions/      â”‚   â”‚  â”œâ”€ PlatformExtensions/      â”‚
â”‚  â”‚   â”œâ”€ Color+iOS.swift      â”‚   â”‚  â”‚   â”œâ”€ Color+macOS.swift    â”‚
â”‚  â”‚   â”œâ”€ Assignment+iOS.swift â”‚   â”‚  â”‚   â”œâ”€ Assignment+macOS.swiftâ”‚
â”‚  â”‚   â””â”€ EventKit+iOS.swift   â”‚   â”‚  â”‚   â””â”€ EventKit+macOS.swift â”‚
â”‚  â”‚                            â”‚   â”‚  â”‚                            â”‚
â”‚  â”œâ”€ DependencyInjection/     â”‚   â”‚  â”œâ”€ DependencyInjection/     â”‚
â”‚  â”‚   â””â”€ AppDependencies.swiftâ”‚   â”‚  â”‚   â””â”€ AppDependencies.swiftâ”‚
â”‚  â”‚                            â”‚   â”‚  â”‚                            â”‚
â”‚  â””â”€ Assets.xcassets/         â”‚   â”‚  â””â”€ Assets.xcassets/         â”‚
â”‚                               â”‚   â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                   â”‚
                â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                â””â”€â”€â”€â–º     RootsShared (SPM)     â—„â”€â”€â”€â”˜
                    â”‚   Swift Package Module    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚                         â”‚
        â–¼                         â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Models/      â”‚  â”‚    Services/     â”‚  â”‚   Utilities/     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Course.swift     â”‚  â”‚ Protocols/       â”‚  â”‚ DateHelpers.swiftâ”‚
â”‚ Assignment.swift â”‚  â”‚   Persistence-   â”‚  â”‚ Formatters.swift â”‚
â”‚ Exam.swift       â”‚  â”‚   Service.swift  â”‚  â”‚ Validation.swift â”‚
â”‚ Schedule.swift   â”‚  â”‚                  â”‚  â”‚ Constants.swift  â”‚
â”‚ Semester.swift   â”‚  â”‚ AssignmentPlan-  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Grade.swift      â”‚  â”‚   Engine.swift   â”‚
â”‚ PlanStep.swift   â”‚  â”‚                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Scheduler-       â”‚  â”‚  DesignTokens/   â”‚
                      â”‚   Adaptation.swiftâ”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                      â”‚                  â”‚  â”‚ Spacing.swift    â”‚
                      â”‚ AutoScheduler-   â”‚  â”‚ Typography.swift â”‚
                      â”‚   .swift         â”‚  â”‚ BorderRadius.swiftâ”‚
                      â”‚                  â”‚  â”‚ Layout.swift     â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Persistence/    â”‚  â”‚  Localization/   â”‚
                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                      â”‚ Persistence-     â”‚  â”‚ Localization-    â”‚
                      â”‚   Container.swiftâ”‚  â”‚   Keys.swift     â”‚
                      â”‚ CoreDataStack-   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚   .swift         â”‚
                      â”‚ Persistence-     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚   Factory.swift  â”‚  â”‚ Dependency-      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Injection/       â”‚
                                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                            â”‚ AppContainer-    â”‚
                                            â”‚   .swift         â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    App Launch (iOS/macOS)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Platform-Specific App Entry Point                   â”‚
â”‚                                                                  â”‚
â”‚  iOS: RootsApp.swift        macOS: RootsMacApp.swift           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Create Platform-Specific Dependencies               â”‚
â”‚                                                                  â”‚
â”‚  let deps = AppDependencies.shared                              â”‚
â”‚  let persistence = IOSPersistenceService() // or Mac version    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Initialize Shared Container (RootsShared)           â”‚
â”‚                                                                  â”‚
â”‚  let container = AppContainer(persistenceService: persistence)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Inject Container into Root View                    â”‚
â”‚                                                                  â”‚
â”‚  IOSRootView().environmentObject(container)                     â”‚
â”‚  MacRootView().environmentObject(container)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Load Data from Persistence                        â”‚
â”‚                                                                  â”‚
â”‚  Task { await container.loadData() }                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Views Render with Data                        â”‚
â”‚                                                                  â”‚
â”‚  - DashboardView uses container.courses                         â”‚
â”‚  - CalendarView uses container.assignments                      â”‚
â”‚  - Platform extensions provide colors/formatting                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Color Architecture Pattern

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  RootsShared (Cross-Platform)                    â”‚
â”‚                                                                  â”‚
â”‚  struct Course {                                                â”‚
â”‚      let id: UUID                                               â”‚
â”‚      var title: String                                          â”‚
â”‚      var colorHex: String  // â† Stored as hex string           â”‚
â”‚  }                                                              â”‚
â”‚                                                                  â”‚
â”‚  enum AssignmentUrgency {                                       â”‚
â”‚      case low, medium, high, critical                           â”‚
â”‚      var label: String { "Low" }  // â† No Color here           â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                           â”‚
                â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  iOS Platform Extension   â”‚   â”‚  macOS Platform Extension â”‚
â”‚                           â”‚   â”‚                           â”‚
â”‚  extension Course {       â”‚   â”‚  extension Course {       â”‚
â”‚      var color: Color {   â”‚   â”‚      var color: Color {   â”‚
â”‚          Color(hex:       â”‚   â”‚          Color(hex:       â”‚
â”‚            colorHex)      â”‚   â”‚            colorHex)      â”‚
â”‚      }                    â”‚   â”‚      }                    â”‚
â”‚  }                        â”‚   â”‚  }                        â”‚
â”‚                           â”‚   â”‚                           â”‚
â”‚  extension Assignment-    â”‚   â”‚  extension Assignment-    â”‚
â”‚    Urgency {              â”‚   â”‚    Urgency {              â”‚
â”‚      var color: Color {   â”‚   â”‚      var color: Color {   â”‚
â”‚          switch self {    â”‚   â”‚          switch self {    â”‚
â”‚          case .low: .gray â”‚   â”‚          case .low: .gray â”‚
â”‚          case .high: .red â”‚   â”‚          case .high: .red â”‚
â”‚          }                â”‚   â”‚          }                â”‚
â”‚      }                    â”‚   â”‚      }                    â”‚
â”‚  }                        â”‚   â”‚  }                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                           â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  SwiftUI Views   â”‚
                    â”‚                  â”‚
                    â”‚  course.color    â”‚
                    â”‚  urgency.color   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Dependency Injection Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      RootsShared/DI/                             â”‚
â”‚                                                                  â”‚
â”‚  protocol PersistenceService: Actor {                           â”‚
â”‚      func saveCourse(_ course: Course) async throws             â”‚
â”‚      func fetchCourses() async throws -> [Course]               â”‚
â”‚  }                                                              â”‚
â”‚                                                                  â”‚
â”‚  @MainActor                                                     â”‚
â”‚  class AppContainer: ObservableObject {                         â”‚
â”‚      let persistenceService: any PersistenceService             â”‚
â”‚      @Published var courses: [Course] = []                      â”‚
â”‚      @Published var assignments: [Assignment] = []              â”‚
â”‚                                                                  â”‚
â”‚      init(persistenceService: any PersistenceService) {         â”‚
â”‚          self.persistenceService = persistenceService           â”‚
â”‚      }                                                          â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                           â”‚
                â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  iOS Implementation       â”‚   â”‚  macOS Implementation     â”‚
â”‚                           â”‚   â”‚                           â”‚
â”‚  actor IOSPersistence-    â”‚   â”‚  actor MacPersistence-    â”‚
â”‚    Service: Persistence-  â”‚   â”‚    Service: Persistence-  â”‚
â”‚    Service {              â”‚   â”‚    Service {              â”‚
â”‚                           â”‚   â”‚                           â”‚
â”‚      func saveCourse(...) â”‚   â”‚      func saveCourse(...) â”‚
â”‚      { /* CoreData */ }   â”‚   â”‚      { /* CoreData */ }   â”‚
â”‚  }                        â”‚   â”‚  }                        â”‚
â”‚                           â”‚   â”‚                           â”‚
â”‚  class AppDependencies {  â”‚   â”‚  class AppDependencies {  â”‚
â”‚      static let shared =  â”‚   â”‚      static let shared =  â”‚
â”‚        AppDependencies()  â”‚   â”‚        AppDependencies()  â”‚
â”‚                           â”‚   â”‚                           â”‚
â”‚      let container:       â”‚   â”‚      let container:       â”‚
â”‚        AppContainer       â”‚   â”‚        AppContainer       â”‚
â”‚                           â”‚   â”‚                           â”‚
â”‚      init() {             â”‚   â”‚      init() {             â”‚
â”‚          let persist =    â”‚   â”‚          let persist =    â”‚
â”‚            IOSPersist..() â”‚   â”‚            MacPersist..() â”‚
â”‚          container =      â”‚   â”‚          container =      â”‚
â”‚            AppContainer(  â”‚   â”‚            AppContainer(  â”‚
â”‚              persist)     â”‚   â”‚              persist)     â”‚
â”‚      }                    â”‚   â”‚      }                    â”‚
â”‚  }                        â”‚   â”‚  }                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                           â”‚
                â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  @main                    â”‚   â”‚  @main                    â”‚
â”‚  struct RootsApp: App {   â”‚   â”‚  struct RootsMacApp: App {â”‚
â”‚      @StateObject var     â”‚   â”‚      @StateObject var     â”‚
â”‚        container =        â”‚   â”‚        container =        â”‚
â”‚        AppDependencies    â”‚   â”‚        AppDependencies    â”‚
â”‚          .shared          â”‚   â”‚          .shared          â”‚
â”‚          .container       â”‚   â”‚          .container       â”‚
â”‚  }                        â”‚   â”‚  }                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Build Process Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Xcode Build Process                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Build RootsShared Package                      â”‚
â”‚                                                                  â”‚
â”‚  1. Compile Models/*.swift                                      â”‚
â”‚  2. Compile Services/*.swift                                    â”‚
â”‚  3. Compile Utilities/*.swift                                   â”‚
â”‚  4. Link into RootsShared.framework                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                           â”‚
                â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Build iOS Target         â”‚   â”‚  Build macOS Target       â”‚
â”‚                           â”‚   â”‚                           â”‚
â”‚  1. Link RootsShared      â”‚   â”‚  1. Link RootsShared      â”‚
â”‚  2. Compile Views/*.swift â”‚   â”‚  2. Compile Views/*.swift â”‚
â”‚  3. Compile Platform-     â”‚   â”‚  3. Compile Platform-     â”‚
â”‚     Extensions/*.swift    â”‚   â”‚     Extensions/*.swift    â”‚
â”‚  4. Compile RootsApp.swiftâ”‚   â”‚  4. Compile RootsMac.swiftâ”‚
â”‚  5. Link frameworks       â”‚   â”‚  5. Link frameworks       â”‚
â”‚  6. Code sign             â”‚   â”‚  6. Code sign             â”‚
â”‚  7. Generate .app         â”‚   â”‚  7. Generate .app         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                           â”‚
                â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    RootsApp.app           â”‚   â”‚    RootsMac.app           â”‚
â”‚  (iOS/iPadOS)             â”‚   â”‚    (macOS)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key Principles Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Code Placement Rules                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  RootsShared (Cross-Platform):                                  â”‚
â”‚    âœ“ Domain models (Course, Assignment, etc.)                   â”‚
â”‚    âœ“ Business logic (planning, scheduling)                      â”‚
â”‚    âœ“ Service protocols                                          â”‚
â”‚    âœ“ Utilities (Date, String extensions)                        â”‚
â”‚    âœ“ Design tokens (spacing, radii)                             â”‚
â”‚    âœ“ Localization keys                                          â”‚
â”‚    âœ— SwiftUI Views                                              â”‚
â”‚    âœ— Color/NSColor/UIColor types                                â”‚
â”‚    âœ— Platform-specific APIs                                     â”‚
â”‚                                                                  â”‚
â”‚  Platform Targets (iOS/macOS):                                  â”‚
â”‚    âœ“ SwiftUI views and navigation                               â”‚
â”‚    âœ“ Platform-specific extensions (colors)                      â”‚
â”‚    âœ“ Platform capability integrations                           â”‚
â”‚    âœ“ App entry points                                           â”‚
â”‚    âœ“ Service implementations                                    â”‚
â”‚    âœ— Business logic duplication                                 â”‚
â”‚    âœ— Model definitions                                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**This architecture ensures maximum code sharing while maintaining platform-native UIs! ğŸ¯**
